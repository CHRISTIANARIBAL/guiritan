{% extends 'store/base.html' %}

{% block content %}
<h1 class="text-3xl font-bold mb-6 text-center">LSM Shoe Shop</h1>

<!-- Product Grid -->
<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
    {% for product in products %}
    <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition flex flex-col">
        <a href="{% url 'product_detail' product.id %}">
            <img src="{{ product.image.url }}" alt="{{ product.name }}" class="w-full h-64 object-cover">
        </a>

        <div class="p-4 flex flex-col flex-grow">
            <h2 class="text-xl font-semibold">{{ product.name }}</h2>
            <p class="text-gray-500 mt-1">{{ product.category.name }}</p>
            <p class="text-gray-600 text-sm mt-1">Size: {{ product.size }}</p>
            <p class="text-blue-700 font-bold mt-2">â‚±{{ product.price }}</p>

            {% if product.stock > 0 %}
            <p class="text-green-600 text-sm mt-1">In Stock: {{ product.stock }}</p>
            {% else %}
            <p class="text-red-600 text-sm mt-1">Out of Stock</p>
            {% endif %}

            <!-- ðŸ›’ Add to Cart Button -->
            {% if product.stock > 0 %}
            <form action="{% url 'add_to_cart' product.id %}" method="post" class="mt-auto">
                {% csrf_token %}
                <button type="submit"
                    class="mt-4 w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg font-semibold transition">
                    ðŸ›’ Add to Cart
                </button>
            </form>
            {% else %}
            <button disabled
                class="mt-4 w-full bg-gray-400 text-white py-2 rounded-lg font-semibold cursor-not-allowed">
                Out of Stock
            </button>
            {% endif %}
        </div>
    </div>
    {% empty %}
    <p class="text-center text-gray-500 col-span-full">No shoes available yet.</p>
    {% endfor %}
</div>
{% endblock %}
